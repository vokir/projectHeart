"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}"NodeList"in window&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var r=0;r<this.length;r++)e.call(t,this[r],r,this)});var FormObj=function(){function e(t,r){_classCallCheck(this,e),this.form=t,this.params=r,this.status=!1,this.classes={correct:this.params.classes.correct?this.params.classes.correct:"correct",empty:this.params.classes.empty?this.params.classes.empty:"empty",error:this.params.classes.error?this.params.classes.error:"error"},this.realTimePresets={text:/[^\,A-Za-zА-Яа-я0-9 ]+/g,phone:/[^0-9+-_() ]+/g,num:/[^0-9]+/g,letters:/[^a-zA-Zа-яА-я]+/g,email:/[^A-Za-zА-Яа-я0-9@._-]+/g},this.presets={email:/^[.0-9a-zA-Zа-яА-Я_-]+@[0-9a-zA-Zа-яА-Я_-]+?\.[a-zA-Zа-яА-Я]{2,}$/,phone:/^((\+7|7|8)+([0-9()-_ ]){10,20})$/},this.events={beforeSubmit:[],submit:[],error:[],empty:[],correct:[]},this.addEvents()}return _createClass(e,[{key:"validate",value:function(){var e=this;this.params.fields.forEach((function(t){e.validateField(t)})),this.status=this.params.fields.every((function(e){return e.status}))}},{key:"validateField",value:function(e){var t;if(t="."!=e.fieldName[0]?this.form.querySelector("[name='".concat(e.fieldName,"']")):this.form.querySelector("".concat(e.fieldName))){if(0==t.value.length&&e.required)return this.setClass(t,"empty"),e.status=!1,void(this.events.empty.length&&this.events.empty.forEach((function(e){return e(t)})));if(e.maxLength&&t.value.length>e.maxLength)return this.setClass(t,"error"),e.status=!1,void(this.events.error.length&&this.events.error.forEach((function(e){return e(t)})));if(e.regExp)if(!(this.presets[e.regExp]?this.presets[e.regExp]:e.regExp).test(t.value))return this.setClass(t,"error"),e.status=!1,void(this.events.error.length&&this.events.error.forEach((function(e){return e(t)})));this.setClass(t,"correct"),e.status=!0,this.events.correct.length&&this.events.correct.forEach((function(e){return e(t)}))}else e.status=!0}},{key:"mask",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/\D/g;if("deleteContentBackward"!=e.inputType&&"deleteByCut"!=e.inputType&&"deleteContentForward"!=e.inputType){var n=e.target.selectionStart,a=e.target.value.length,s=e.target.value.replace(r,""),o=t.replace(r,""),i=0;for(o.length&&(i=o.length);i<s.length;i++)t=t.replace("*",s[i]);e.target.value=t.split("*")[0],n!=a&&(e.target.selectionStart=n,e.target.selectionEnd=n)}}},{key:"on",value:function(e,t){this.events[e]&&this.events[e].push(t)}},{key:"setClass",value:function(e,t){var r=this;Object.keys(this.classes).forEach((function(n){n==t?e.classList.add(r.classes[n]):e.classList.remove(r.classes[n])}))}},{key:"addEvents",value:function(){var e=this;this.params.fields.forEach((function(t){var r;r="."!=t.fieldName[0]?e.form.querySelector("[name='".concat(t.fieldName,"']")):e.form.querySelector("".concat(t.fieldName)),t.status=!1,r&&(t.realTime&&r.addEventListener("input",(function(){var n=e.realTimePresets[t.realTimeRegExp]?e.realTimePresets[t.realTimeRegExp]:t.realTimeRegExp;r.value=r.value.replace(n,"")})),e.params.focusValidate&&r.addEventListener("change",(function(){e.validateField(t)})),t.mask&&(r.maxLength=t.mask.length,t.maskRegExp?r.addEventListener("input",(function(r){return e.mask(r,t.mask,t.maskRegExp)})):r.addEventListener("input",(function(r){return e.mask(r,t.mask)}))))})),this.form&&this.form.addEventListener("submit",(function(t){e.validate(),e.status?(e.events.beforeSubmit.length&&e.events.beforeSubmit.forEach((function(e){return e()})),e.events.submit.length?e.events.submit.forEach((function(e){return e()})):e.form.submit()):t.preventDefault()}))}}]),e}(),Form=function(){function e(t,r){var n=this;_classCallCheck(this,e),this.forms=[],t instanceof Element?t&&this.forms.push(new FormObj(t,r)):t.forEach((function(e){e&&n.forms.push(new FormObj(e,r))}))}return _createClass(e,[{key:"on",value:function(e,t){this.forms.forEach((function(r){r.on(e,t)}))}}]),e}();!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e,r){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}var n=document.querySelector("#heart"),a=document.getElementsByClassName("heart-text");document.body.style.overflow="hidden",n.addEventListener("click",(function(){n.classList.remove("heart-beat"),n.classList.toggle("tool"),a[0].style.opacity="0",n.classList.add("heart-scale"),setTimeout((function(){document.getElementById("loader").classList.add("loaded"),setTimeout((function(){document.getElementById("loader").remove(),l(),document.body.style.overflow="auto"}),600)}),1550)}));var s=["Neo,","sooner or later","you're going to realize","just as I did","that there's a difference","between knowing the path","and walking the path"],o=new(function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e,this.chars="!<>-_\\/[]{}—=+*^?#________",this.update=this.update.bind(this)}var r,n,a;return r=t,(n=[{key:"setText",value:function(e){var t=this,r=this.el.innerText,n=Math.max(r.length,e.length),a=new Promise((function(e){return t.resolve=e}));this.queue=[];for(var s=0;s<n;s++){var o=r[s]||"",i=e[s]||"",l=Math.floor(40*Math.random()),c=l+Math.floor(40*Math.random());this.queue.push({from:o,to:i,start:l,end:c})}return cancelAnimationFrame(this.frameRequest),this.frame=0,this.update(),a}},{key:"update",value:function(){for(var e="",t=0,r=0,n=this.queue.length;r<n;r++){var a=this.queue[r],s=a.from,o=a.to,i=a.start,l=a.end,c=a.char;this.frame>=l?(t++,e+=o):this.frame>=i?((!c||Math.random()<.28)&&(c=this.randomChar(),this.queue[r].char=c),e+='<span class="chars">'.concat(c,"</span>")):e+=s}this.el.innerHTML=e,t===this.queue.length?this.resolve():(this.frameRequest=requestAnimationFrame(this.update),this.frame++)}},{key:"randomChar",value:function(){return this.chars[Math.floor(Math.random()*this.chars.length)]}}])&&e(r.prototype,n),a&&e(r,a),t}())(document.querySelector(".introduce-info__text")),i=0,l=function e(){o.setText(s[i]).then((function(){setTimeout(e,2e3)})),i=(i+1)%s.length};document.addEventListener("DOMContentLoaded",(function(){window.addEventListener("scroll",(function(){var e=$(window).scrollTop(),t=document.querySelector(".header"),r=document.querySelector(".header-menu");e>100?t.classList.add("header_shadow"):t.classList.remove("header_shadow"),e>100?r.classList.add("header-menu_sticky"):r.classList.remove("header-menu_sticky")})),document.querySelector(".header-burger__wrap").addEventListener("click",(function(){document.querySelector(".header-burger__wrap").classList.toggle("header-burger__wrap_close"),document.querySelector(".header-menu").classList.toggle("header-menu_open"),document.body.classList.toggle("scroll")})),$('a[href*="#"]').on("click",(function(e){$("html,body").animate({scrollTop:$($(this).attr("href")).offset().top-100},1e3),e.preventDefault(),document.querySelector(".header-burger__wrap").classList.toggle("header-burger__wrap_close"),document.querySelector(".header-menu").classList.toggle("header-menu_open"),document.body.classList.toggle("scroll")}))})),document.addEventListener("DOMContentLoaded",(function(){if(document.querySelector("form"))new Form(document.querySelectorAll("form"),{focusValidate:!0,classes:{empty:"input_empty",error:"input-group__input_error",correct:"input-group__input_correct"},fields:[{fieldName:"name",maxLength:32,realTimeRegExp:"text",realTime:!0,required:!0},{fieldName:"message",realTimeRegExp:"text",realTime:!0},{fieldName:"phone",maxLength:32,realTimeRegExp:"phone",realTime:!0,required:!0,regExp:"phone",mask:"+7 (***) ***-**-**"}]})}));try{document.getElementById("submit").addEventListener("click",(function(e){!function(e){var t=document.querySelectorAll("form input");status=0;var n,a=r(t);try{for(a.s();!(n=a.n()).done;){n.value.classList.contains("input-group__input_correct")&&status++}}catch(e){a.e(e)}finally{a.f()}if(3==status){e.preventDefault();var s,o={message:[]},i=r(document.querySelectorAll("form input"));try{for(i.s();!(s=i.n()).done;){var l=s.value;o.message.push(l.value)}}catch(e){i.e(e)}finally{i.f()}JSON.stringify(o),$.ajax({type:"POST",url:"ajax.php",cache:!1,data:{name:o.message[0],phone:o.message[1],text:o.message[3]},dataType:"json",success:function(e){document.querySelector(".overlay-loader").classList.toggle("overlay-loader_active"),document.querySelector("form").remove(),$(".form-container").append('<div class="logo"></div><br>\n\t\t\t\t<h1>Форма успешно отправлена</h1>'),setTimeout((function(){document.querySelector(".overlay-loader").classList.toggle("overlay-loader_active")}),1e3),console.log("Не проиграл")},error:function(e){console.log("Проиграл",e)}})}}(e)}))}catch(e){}$(document).ready((function(e){e(window).on("scroll",(function(){e(window).scrollTop()+e(window).height()>e(".wrapper").outerHeight()?(e("body").addClass("tight"),e(".arrow").hide()):(e("body").removeClass("tight"),e(".arrow").show())}))})),$(".arrow").click((function(){$("html").animate({scrollTop:$("html").prop("scrollHeight")},1200)}))}));